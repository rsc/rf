inject G f
-- x.go --
package p

var G int

type C[K, V any] struct{}

type T struct{}

func f() { g() }
func g() { g2(1) }
func g2(g int) { h(g) }
func h(i int) { var c C[T, T]; c.j(i+1) }
func (c *C[K, V]) j(k int) { m(k+G) }
func m(l int) { println(2*G+l) }
func z() { h(2) }
func y() {}

-- stdout --
diff old/x.go new/x.go
--- old/x.go
+++ new/x.go
@@ -6,12 +6,11 @@

 type T struct{}

-func f() { g() }
-func g() { g2(1) }
-func g2(g int) { h(g) }
-func h(i int) { var c C[T, T]; c.j(i+1) }
-func (c *C[K, V]) j(k int) { m(k+G) }
-func m(l int) { println(2*G+l) }
-func z() { h(2) }
-func y() {}
-
+func f()                          { g(G) }
+func g(g int)                     { g2(g, 1) }
+func g2(g_ int, g int)            { h(g_, g) }
+func h(g int, i int)              { var c C[T, T]; c.j(g, i+1) }
+func (c *C[K, V]) j(g int, k int) { m(g, k+g) }
+func m(g int, l int)              { println(2*g + l) }
+func z()                          { h(G, 2) }
+func y()                          {}
